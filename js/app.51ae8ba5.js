(()=>{"use strict";var e={510(e,l,t){var o=t(751),a=t(810),n=t(641),s=t(953),i=t(29);const u={__name:"App",setup(e){return console.log(),(e,l)=>((0,n.uX)(),(0,n.CE)("main",null,[(0,n.bF)((0,s.R1)(i.Tp))]))}},r=u,c=r,m=(0,a.nY)("form",()=>{const e="formData",l={full_name:"",languages:[],highschool_name:"",highschool_lat:"",highschool_lon:"",mis1_name:"",mis1_lat:"",mis1_lon:"",mis2_name:"",mis2_lat:"",mis2_lon:""};let t=null;try{const l=localStorage.getItem(e);t=l?JSON.parse(l):null}catch(c){t=null}const o=(0,s.KR)(t??l);function a(e){o.value={...o.value,...e}}function i(e,l){o.value[e]=l}function u(){o.value={full_name:"",languages:[],highschool_name:"",highschool_lat:"",highschool_lon:"",mis1_name:"",mis1_lat:"",mis1_lon:"",mis2_name:"",mis2_lat:"",mis2_lon:""}}function r(){return o.value}return(0,n.wB)(o,l=>{try{localStorage.setItem(e,JSON.stringify(l))}catch(c){}},{deep:!0}),{formData:o,setFormData:a,updateField:i,resetForm:u,getFormData:r}});var d=t(33);const h={class:"text-box-title"},p={class:"text-box-description"},_={__name:"TextBox",props:{title:{type:String,required:!1,default:""},description:{type:String,required:!1,default:""},modelValue:{type:String,required:!1,default:""}},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,a=l,s=(0,n.EW)({get(){return t.modelValue},set(e){a("update:modelValue",e)}});return(e,l)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("p",h,(0,d.v_)(t.title),1),(0,n.Lk)("p",p,(0,d.v_)(t.description),1),(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"Type something...","onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e)},null,512),[[o.Jo,s.value]])]))}};var v=t(262);const g=(0,v.A)(_,[["__scopeId","data-v-5e5980f5"]]),f=g,b={class:"input-list"},y=["onClick"],k={__name:"SelectMultiple",props:{title:{type:String,required:!1,default:""},modelValue:{type:Array,required:!1,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,a=l;let i=Date.now();const u=(0,s.KR)(""),r=(0,s.KR)((t.modelValue||[]).map(e=>({id:i++,text:e})));function c(){r.value.push({id:i++,text:u.value}),u.value="",a("update:modelValue",r.value.map(e=>e.text))}function m(e){r.value=r.value.filter(l=>l.id!==e.id),a("update:modelValue",r.value.map(e=>e.text))}return(0,n.wB)(()=>t.modelValue,e=>{const l=r.value.map(e=>e.text),t=JSON.stringify(e)!==JSON.stringify(l);t&&(r.value=(e||[]).map(e=>({id:i++,text:e})))}),(e,l)=>((0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("p",null,(0,d.v_)(t.title),1),(0,n.Lk)("div",null,[(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"Type something...","onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e)},null,512),[[o.Jo,u.value]]),(0,n.Lk)("button",{class:"add-button",type:"button",onClick:c},"Add")]),(0,n.Lk)("div",b,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value,e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"input-item"},[(0,n.eW)((0,d.v_)(e.text)+" ",1),(0,n.Lk)("button",{class:"remove-button",type:"button",onClick:l=>m(e)}," Remove ",8,y)]))),128))])]))}},V=(0,v.A)(k,[["__scopeId","data-v-40ced21e"]]),F=V,E={class:"friends-form-wrapper"},w={class:"form-inputs"},L={class:"row-wrapper"},D={class:"row-wrapper"},C={class:"second-mission"},M={class:"row-wrapper"},I={class:"row-wrapper"},O={class:"row-wrapper"},S={__name:"FriendsAroundMeForm",setup(e){const l=(0,i.rd)(),t=m(),a=(0,n.EW)({get:()=>t.formData.full_name,set:e=>t.updateField("full_name",e)}),s=(0,n.EW)({get:()=>t.formData.languages,set:e=>t.updateField("languages",e)}),u=(0,n.EW)({get:()=>t.formData.highschool_name,set:e=>t.updateField("highschool_name",e)}),r=(0,n.EW)({get:()=>t.formData.highschool_lat,set:e=>t.updateField("highschool_lat",e)}),c=(0,n.EW)({get:()=>t.formData.highschool_lon,set:e=>t.updateField("highschool_lon",e)}),d=(0,n.EW)({get:()=>t.formData.mis1_name,set:e=>t.updateField("mis1_name",e)}),h=(0,n.EW)({get:()=>t.formData.mis1_lat,set:e=>t.updateField("mis1_lat",e)}),p=(0,n.EW)({get:()=>t.formData.mis1_lon,set:e=>t.updateField("mis1_lon",e)}),_=(0,n.EW)({get:()=>t.formData.mis2_name,set:e=>t.updateField("mis2_name",e)}),v=(0,n.EW)({get:()=>t.formData.mis2_lat,set:e=>t.updateField("mis2_lat",e)}),g=(0,n.EW)({get:()=>t.formData.mis2_lon,set:e=>t.updateField("mis2_lon",e)});function b(){const e=t.getFormData();console.log("Form submit:",e),l.push("/results")}return(e,l)=>((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("form",{onSubmit:(0,o.D$)(b,["prevent"]),onKeydown:l[11]||(l[11]=(0,o.jR)((0,o.D$)(()=>{},["prevent"]),["enter"]))},[(0,n.Lk)("div",w,[(0,n.Lk)("div",L,[(0,n.bF)(f,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),title:"Full Name"},null,8,["modelValue"]),(0,n.bF)(f,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),title:"Where did you Graduate High School?"},null,8,["modelValue"])]),(0,n.Lk)("div",D,[(0,n.bF)(F,{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e),title:"Languages Spoken"},null,8,["modelValue"]),(0,n.bF)(f,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=e=>d.value=e),title:"Where did you serve your mission?"},null,8,["modelValue"])]),(0,n.Lk)("div",C,[l[12]||(l[12]=(0,n.Lk)("p",null," Have you served in another mission? Enter that second location here! ",-1)),(0,n.bF)(f,{modelValue:_.value,"onUpdate:modelValue":l[4]||(l[4]=e=>_.value=e),title:"Second Mission Location"},null,8,["modelValue"])]),(0,n.Lk)("div",M,[(0,n.bF)(f,{modelValue:h.value,"onUpdate:modelValue":l[5]||(l[5]=e=>h.value=e),title:"Mission 1 Latitude"},null,8,["modelValue"]),(0,n.bF)(f,{modelValue:p.value,"onUpdate:modelValue":l[6]||(l[6]=e=>p.value=e),title:"Mission 1 Longitude"},null,8,["modelValue"])]),(0,n.Lk)("div",I,[(0,n.bF)(f,{modelValue:v.value,"onUpdate:modelValue":l[7]||(l[7]=e=>v.value=e),title:"Mission 2 Latitude"},null,8,["modelValue"]),(0,n.bF)(f,{modelValue:g.value,"onUpdate:modelValue":l[8]||(l[8]=e=>g.value=e),title:"Mission 2 Longitude"},null,8,["modelValue"])]),(0,n.Lk)("div",O,[(0,n.bF)(f,{modelValue:r.value,"onUpdate:modelValue":l[9]||(l[9]=e=>r.value=e),title:"High School Latitude"},null,8,["modelValue"]),(0,n.bF)(f,{modelValue:c.value,"onUpdate:modelValue":l[10]||(l[10]=e=>c.value=e),title:"High School Longitude"},null,8,["modelValue"])])]),l[13]||(l[13]=(0,n.Lk)("button",{type:"submit"},"Submit",-1))],32)]))}},x=(0,v.A)(S,[["__scopeId","data-v-7e62266e"]]),X=x,j={class:"form-container"},U={__name:"Home",setup(e){return(e,l)=>((0,n.uX)(),(0,n.CE)("div",null,[l[0]||(l[0]=(0,n.Lk)("div",{class:"home-header"},[(0,n.Lk)("h1",null,"Friends Around Me!")],-1)),l[1]||(l[1]=(0,n.Lk)("div",{class:"home-subheader"},[(0,n.Lk)("p",null," Using information about your High School, Mission (if applicable), and languages spoke, we can find friends around you! ")],-1)),(0,n.Lk)("div",j,[(0,n.bF)(X)])]))}},W=(0,v.A)(U,[["__scopeId","data-v-9c2fa87c"]]),J=W;var q=t(313);const N="https://hufnrzrqsezgbffprjso.supabase.co",A="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh1Zm5yenJxc2V6Z2JmZnByanNvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1NDY3MjEsImV4cCI6MjA4NTEyMjcyMX0.Itpm6REdAyOw_-9rw2CuibDzogN43Rq_E8rM6zJXVFw",R=(0,q.UU)(N,A);async function B(e){if(null==e)return null;const{data:l,error:t}=await R.from("users").select().eq("id",e).single();return t?(console.error("Error fetching user:",t),null):l}async function K(e){const{data:l,error:t}=await R.from("users").select().neq("id",e);return t?(console.error("Error fetching data:",t),null):l}async function z(e,l=null){const t={full_name:e.full_name,highschool_name:e.highschool_name,highschool_lat:e.highschool_lat,highschool_lon:e.highschool_lon,mis1_name:e.mis1_name,mis1_lat:e.mis1_lat,mis1_lon:e.mis1_lon,mis2_name:e.mis2_name,mis2_lat:e.mis2_lat,mis2_lon:e.mis2_lon};let o,a;if(null==l){if(({data:o,error:a}=await R.from("users").insert(t).select()),a)return console.error("Error inserting data:",a),null;console.log("Data successfully inserted")}else{if(({data:o,error:a}=await R.from("users").update(t).eq("id",l).select()),a)return console.error("Error updating data:",a),null;console.log("Data successfully updated")}return o[0].id}async function H(e){const l=await B(e);console.log("user:",l);const t=await K(e);console.log("all others:",t);const o={};if(null!=l.highschool_lat&&null!=l.highschool_lon&&(o.highschool={name:l.highschool_name,lat:l.highschool_lat,lon:l.highschool_lon}),null!=l.mis1_lat&&null!=l.mis1_lon&&(o.mis1={name:l.mis1_name,lat:l.mis1_lat,lon:l.mis1_lon}),null!=l.mis2_lat&&null!=l.mis2_lon&&(o.mis2={name:l.mis2_name,lat:l.mis2_lat,lon:l.mis2_lon}),0===Object.keys(o).length)return["No locations given."];const a={highschool:"went to high school",mis1:"served a mission",mis2:"served a mission"},n=await K(e),s=[];return n.forEach(e=>{const l={};if(null!=e.highschool_lat&&null!=e.highschool_lon&&(l.highschool={name:e.highschool_name,lat:e.highschool_lat,lon:e.highschool_lon}),null!=e.mis1_lat&&null!=e.mis1_lon&&(l.mis1={name:e.mis1_name,lat:e.mis1_lat,lon:e.mis1_lon}),null!=e.mis2_lat&&null!=e.mis2_lon&&(l.mis2={name:e.mis2_name,lat:e.mis2_lat,lon:e.mis2_lon}),0===Object.keys(l).length)return;let t=1/0,n="";for(const[s,i]of Object.entries(o))for(const[e,o]of Object.entries(l)){const l=Math.round(T(i.lat,i.lon,o.lat,o.lon));if(l<t){t=l;const i="highschool"===e?"graduated":"served a mission",u=a[s];n=`${i} in ${o.name} ${l} miles from where you ${u}`}}s.push({name:e.full_name,distance:t,connection:n})}),s.sort((e,l)=>e.distance-l.distance)}function T(e,l,t,o){const a=3959,n=e=>e*Math.PI/180,s=n(t-e),i=n(o-l),u=n(e),r=n(t),c=Math.sin(s/2)*Math.sin(s/2)+Math.cos(u)*Math.cos(r)*Math.sin(i/2)*Math.sin(i/2),m=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return a*m}const Z={class:"connection-card"},$={key:0,class:"best-match"},Y={class:"connection-item"},P={__name:"ConnectionCard",props:{bestMatch:{type:Boolean,required:!1,default:!1},connectionData:{type:Object,required:!0,default:()=>({})}},setup(e){return(l,t)=>((0,n.uX)(),(0,n.CE)("div",Z,[e.bestMatch?((0,n.uX)(),(0,n.CE)("div",$,[...t[0]||(t[0]=[(0,n.Lk)("h1",null,"Best Match",-1)])])):(0,n.Q3)("",!0),(0,n.Lk)("div",Y,[(0,n.Lk)("h3",null,(0,d.v_)(e.connectionData.name),1),(0,n.Lk)("p",null,[t[1]||(t[1]=(0,n.Lk)("b",null,"Distance:",-1)),(0,n.eW)(" "+(0,d.v_)(e.connectionData.distance)+" miles",1)]),(0,n.Lk)("p",null,[t[2]||(t[2]=(0,n.Lk)("b",null,"Connection:",-1)),(0,n.eW)(" "+(0,d.v_)(e.connectionData.connection),1)])])]))}},Q=(0,v.A)(P,[["__scopeId","data-v-1e28e460"]]),G=Q,ee={class:"results-container"},le={key:0,class:"results-content"},te={key:0,class:"location-connections"},oe={key:1,class:"no-results"},ae={__name:"Results",setup(e){const l=(0,i.rd)(),t=m(),o=(0,n.EW)(()=>t.getFormData()),a=(0,s.KR)(null),u=(0,s.KR)(null);function r(){try{t.resetForm()}catch(e){}try{localStorage.removeItem("formData")}catch(e){}l.push("/")}return(0,n.sV)(async()=>{try{const e=t.getFormData(),{languages:l,...o}=e;console.log("Form data retrieved from store:",e);const n=e=>{const l=parseFloat(e);return Number.isFinite(l)?l:null};o.highschool_lat=n(o.highschool_lat),o.highschool_lon=n(o.highschool_lon),o.mis1_lat=n(o.mis1_lat),o.mis1_lon=n(o.mis1_lon),o.mis2_lat=n(o.mis2_lat),o.mis2_lon=n(o.mis2_lon);const s=await z(o,a.value);if(a.value=s,console.log("Submitted user data, received userId:",s),null!=s){const e=await H(s);u.value=e,console.log("Received location connection:",e)}else console.warn("submitUserData returned null id")}catch(e){console.error("Error fetching user/location data:",e)}}),(e,l)=>((0,n.uX)(),(0,n.CE)("div",ee,[l[1]||(l[1]=(0,n.Lk)("h1",null,"View Your Connections",-1)),o.value?((0,n.uX)(),(0,n.CE)("div",le,[u.value?((0,n.uX)(),(0,n.CE)("div",te,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value,(e,l)=>((0,n.uX)(),(0,n.CE)("div",{key:l,class:(0,d.C4)({"best-match":0===l,"result-item":0!==l})},[(0,n.bF)(G,{bestMatch:0===l,connectionData:{name:e.name,distance:e.distance,connection:e.connection}},null,8,["bestMatch","connectionData"])],2))),128))])):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:r,class:"home-button"},"Back to Home")])):((0,n.uX)(),(0,n.CE)("div",oe,[...l[0]||(l[0]=[(0,n.Lk)("p",null,"No form data available",-1)])]))]))}},ne=(0,v.A)(ae,[["__scopeId","data-v-4293888d"]]),se=ne,ie=[{path:"/",component:J},{path:"/results",component:se}],ue=(0,i.aE)({history:(0,i.Bt)(),routes:ie}),re=(0,o.Ef)(c);re.use((0,a.Ey)()),re.use(ue),re.mount("#app")}},l={};function t(o){var a=l[o];if(void 0!==a)return a.exports;var n=l[o]={exports:{}};return e[o](n,n.exports,t),n.exports}t.m=e,(()=>{var e=[];t.O=(l,o,a,n)=>{if(!o){var s=1/0;for(c=0;c<e.length;c++){for(var[o,a,n]=e[c],i=!0,u=0;u<o.length;u++)(!1&n||s>=n)&&Object.keys(t.O).every(e=>t.O[e](o[u]))?o.splice(u--,1):(i=!1,n<s&&(s=n));if(i){e.splice(c--,1);var r=a();void 0!==r&&(l=r)}}return l}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,a,n]}})(),(()=>{t.d=(e,l)=>{for(var o in l)t.o(l,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:l[o]})}})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l)})(),(()=>{var e={524:0};t.O.j=l=>0===e[l];var l=(l,o)=>{var a,n,[s,i,u]=o,r=0;if(s.some(l=>0!==e[l])){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(u)var c=u(t)}for(l&&l(o);r<s.length;r++)n=s[r],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(c)},o=self["webpackChunkw26_fs_friends_around_me"]=self["webpackChunkw26_fs_friends_around_me"]||[];o.forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o))})();var o=t.O(void 0,[504],()=>t(510));o=t.O(o)})();
//# sourceMappingURL=app.51ae8ba5.js.map